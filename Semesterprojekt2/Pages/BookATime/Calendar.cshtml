@page
@using Semesterprojekt2.Service;
@model Semesterprojekt2.Pages.BookATime.CalendarModel
@{
}

<html>
    <head>
        <style>
            table 
                {
                   width: 100%;
                   border-collapse: collapse;
                }

            td 
                {
                    border: 1px solid #ddd;
                    text-align: center;
                    padding: 8px;
                }


           .button-like-text 
                {
                    background: none; /* Fjerner baggrundsstil */
                    color: inherit; /* Arver tekstfarven fra omgivende element */
                    border: none; /* Fjerner rammen */
                    padding: 0; /* Fjerner padding */
                    font: inherit; /* Arver skriftstil */
                    cursor: pointer; /* Bevarer musepeger som klikbar */
                }

           .button-like-text:hover 
                {
                    text-decoration: underline; /* Tilføjer understregning ved hover for at indikere klikbarhed */
                }


           .orange-day 
                {
                    background-color: darkorange;
                    color: white; /* White text for better readability */
                }

           .yellow-day 
                {
                    background-color: #E9CF1C;
                    color: white;
                }
                    /* DDC62F */
           .skrift-mellem-månederne 
                {
                    display: flex;
                    justify-content: space-between;
                }
            .Forrige-måned 
                {
    
                }
            .Næste-måned 
                {
    
                }
            h1
                {
                    text-align: center;
                }
            h2
                {
                    text-align: center;
                }
            .AltTekstIToppen
                {
                    display: flex;
                    justify-content: space-between;
                }
            .OBS
                {

                }
            .farvedag
                {
                }
            .År-Måned
                {
                }
            .past-day 
                {
                    color: white;
                    background-color: grey; /* Or any other color that indicates non-selectability */
                }
        </style>
    </head>
    <body>
        <h1>Book A Time</h1>
        <hr /> 
        <div class="År-Måned">
            <h2>@Model.MonthName @Model.Year</h2> 
        </div>
        <div class="AltTekstIToppen">
            <div class="farvedag">
                <p>Sat-Tue (Yellow): Mobile service. <br />Wed-Fri (Orange): Salon. <br /> Red: The day is booked.</p>
            </div>  
            <div class="OBS">
                <p><b>NOTE!! I have both a store <br /> and a mobile service.</b></p>
            </div>
        </div>
       
        @* ? fungere som en kort form for en if-else sætning. 
        : Model.Year, hvis måneden ikke er december(plus)/januar(minus), vil det returnere Model.Year. Dette betyder, at hvis måneden ikke er december, forbliver årstallet uændret. *@
 
        <div class="skrift-mellem-månederne">
            <div class="Forrige-måned">
                <a asp-page="/BookATime/Calendar" asp-route-Year="@(Model.Month == 1 ? Model.Year - 1 : Model.Year)" asp-route-Month="@(Model.Month == 1 ? 12 : Model.Month - 1)">Last Month</a>
            </div>
            <div class="Næste-måned">
                <a asp-page="/BookATime/Calendar" asp-route-Year="@(Model.Month == 12 ? Model.Year + 1 : Model.Year)" asp-route-Month="@(Model.Month == 12 ? 1 : Model.Month + 1)">Next Month</a>
            </div>
        </div>
    <table>
        @{
            int dayCounter = 0; // Initialize the counter for days in the week. hvorfor vi starter på 0?
            // Når man arbejder med tællere i programmering, starter man ofte fra 0 afhængigt af konteksten. Dette skyldes, at mange programmeringssprog og datamodeller bruger 0-baserede indeksering.
            DateTime today = DateTime.Today; 

           
        }
       
        <tr>
            @foreach (var day in Model.DaysInMonth)
            {
                if (dayCounter == 7)
                {
                    // When there are 7 days, close the current row and start a new one
                    @: </tr><tr>
                    dayCounter = 0; // Reset the counter for the new row
                }
                
                DateTime currentDate = new DateTime(Model.Year, Model.Month, day);

                // Denne linje bestemmer CSS-klassen for en given dag. 
                // Hvis 'currentDate' repræsenterer en dato, der allerede er forbi (dvs. før 'today'), 
                // bliver 'dayClass' sat til "past-day". 
                // Hvis 'currentDate' er i dag eller i fremtiden, hentes klassen ved at kalde 'GetDayClass' metoden.

                 string dayClass = currentDate < today ? "past-day" : BookATimeService.GetDayClass(currentDate);

                // Denne boolean ('isPast') er sand (true), hvis 'currentDate' er før 'today', hvilket indikerer 
                // at det er en dato i fortiden. Denne værdi bruges til at afgøre, om den tilsvarende dag 
                // skal kunne klikkes på eller ej i brugergrænsefladen.

                bool isPast = currentDate < today;
                <td class="@dayClass">
                    @if (!isPast)
                    {
                        <form method="get" asp-page="/BookATime/BookATime">

                            <input type="hidden" name="Year" value="@Model.Year" />
                            <input type="hidden" name="Month" value="@Model.Month" />
                            <input type="hidden" name="Day" value="@day" />
                            <button type="submit" class="button-like-text">@day</button>
                        </form>
                    }
                    else
                    {
                        @day
                    }
                </td>

                dayCounter++; // Increment the counter
            }
    
            @if (dayCounter > 0)
            {
                // Close the last row if it's not empty
        <tr> </tr>
            }
      
    </table>
       

  </body>
</html>